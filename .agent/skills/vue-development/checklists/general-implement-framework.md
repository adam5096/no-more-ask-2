
# 🛠 全功能開發：萬用盤點框架

當你接到任何前端開發任務時，請按照以下五個維度進行「施工前盤點」。

## 1. 系統邊界盤點 (System Boundary)

**核心問題：誰負責做什麼？ 包含但不限於下列幾點**

* **前端專屬邏輯**：UI 切換、即時欄位驗證 (Regex)、導覽跳轉、本地快取 (LocalStorage)。
* **後端與外部職責**：資料持久化、權限稽核、高併發計算、第三方金流/物流串接。
* **資料傳遞介面**：盤點需要幾支 API？是 RESTful 還是 GraphQL？

## 2. 狀態與數據流盤點 (State & Data Flow)

**核心問題：資料存哪裡？怎麼變動？ 包含但不限於下列幾點**

* **暫時性狀態 (Transient State)**：僅限於目前頁面的 UI 狀態（如：Modal 是否開啟、載入中轉圈圈）。
* **持久性資料 (Persistent Data)**：從 API 拿回來的實體資料（如：商品列表、使用者 ID）。
* **全域共享 (Global State)**：需要跨頁面同步的資料（如：購物車數量、登入狀態）。
* **生命週期**：包含但不限於：資料何時「初始化」？何時「更新」？何時「銷毀」？

## 3. 觸發與通訊盤點 (Triggers & Communication)

**核心問題：什麼時候發起請求？包含但不限於下列幾點**

* **主動行為 (User Action)**：點擊、提交、拖曳  使用 **`$fetch`** 或 **Axios**。
* **自動行為 (System Hook)**：頁面載入、滾動到頁尾、定時輪詢  使用 **Nuxt `useFetch**` 或 **Lifecycle Hooks**。
* **副作用 (Side Effects)**：API 成功後，是否要清除表單？是否要顯示 Toast 通知？

## 4. 非同步與併發盤點 (Async & Concurrency)

**核心問題：等待時會發生什麼事？ 包含但不限於下列幾點**

* **非同步數量**：該功能涉及多少次網絡請求？
* **依賴關係**：請求 A 是否必須在請求 B 完成後才能開始？（序列 vs. 併發）。
* **競爭狀態 (Race Conditions)**：如果快速點擊兩次，舊的請求會被取消嗎？（VueUse `canAbort`）。

## 5. 異常與極限路徑盤點 (Edge Cases)

**核心問題：如果事情不順利怎麼辦？ 包含但不限於下列幾點**

* **空值處理 (Null Safety)**：後端沒資料回傳 `[]` 或 `null` 時，前端會崩潰嗎？
* **錯誤反饋**：401 (未授權)、404 (找不到)、500 (伺服器噴錯) 的對應 UI。
* **離線/逾時**：網路斷線時的處理。

---

## 📋 新人實作 Check-list (通用版)

新人完成程式碼後，請對照以下項目進行 Self-check：

| 檢查項 | 具體描述 | 確保符合 |
| --- | --- | --- |
| **變數命名** | 是否具備語意化？(例如 `isSubmitting` 而不是 `s`) | ✅ |
| **API 分類** | 初始化資料用 `useFetch`，事件觸發用 `$fetch`？ | ✅ |
| **載入狀態** | 請求發出後，按鈕是否有 `disabled`？ | ✅ |
| ** cleanup** | 組件銷毀時，定時器或監聽器是否已移除？ | ✅ |
| **複用性** | 是否有重複邏輯可以抽成 `composables`？ | ✅ |

---

## 📝 程式夥伴的新法建議

如果你希望新人能快速上手，我建議在你的專案模板中放入這段 **「盤點註解模板」**。每當開新檔案時，強制要求先填寫：

```javascript
/**
 * [功能名稱]: 
 * 1. 系統邊界: 前端驗證 -> 後端儲存 -> 跳轉
 * 2. 核心狀態: formData (reactive), isLoading (ref)
 * 3. 觸發機制: @submit.prevent -> handleAction()
 * 4. 非同步任務: 1 個 (POST $fetch)
 * 5. 異常路徑: 考慮 Email 已註冊的 409 錯誤
 */

```